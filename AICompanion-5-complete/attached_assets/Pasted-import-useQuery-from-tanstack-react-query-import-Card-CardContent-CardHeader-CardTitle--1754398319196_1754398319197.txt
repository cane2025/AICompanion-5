import { useQuery } from "@tanstack/react-query";
import { Card, CardContent, CardHeader, CardTitle } from "@/components/ui/card";
import { Button } from "@/components/ui/button";
import { Tabs, TabsContent, TabsList, TabsTrigger } from "@/components/ui/tabs";
import { DashboardStats } from "@/components/dashboard-stats";
import { CareOverview } from "@/components/care-overview";
import { StaffStatistics } from "@/components/staff-statistics";
import { DataOverview } from "@/components/data-overview";
import { CompleteWorkflowOverview } from "@/components/complete-workflow-overview";
import { CarePlanDialog } from "@/components/care-plan-dialog";
import { MonthlyReportDialog } from "@/components/monthly-report-dialog";
import { WeeklyDocumentationDialog } from "@/components/weekly-documentation-dialog";
import { Users, FileText, Calendar, TrendingUp, BarChart3, Heart } from "lucide-react";
import type { Staff } from "@shared/schema";

export function Dashboard() {
  const {
    data: staff = [],
    isLoading: staffLoading,
    isError: staffError,
    error
  } = useQuery<Staff[]>({
    queryKey: ["/api/staff"],
  });

  if (staffLoading) {
    return (
      <div className="p-6">
        <div className="animate-pulse">
          <div className="h-8 bg-gray-200 rounded mb-4"></div>
          <div className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8">
            {[...Array(4)].map((_, i) => (
              <div key={i} className="h-24 bg-gray-200 rounded"></div>
            ))}
          </div>
        </div>
      </div>
    );
  }

  if (staffError) {
    return (
      <div className="p-6 text-red-600">
        <div className="font-bold mb-2">Kunde inte ladda personaldata.</div>
        <div className="text-sm">{error instanceof Error ? error.message : "Något gick fel."}</div>
      </div>
    );
  }

  if (staff.length === 0) {
    return (
      <div className="p-6 text-center text-ungdoms-600">
        <div className="font-bold mb-2">Ingen personal hittades.</div>
        <div className="text-sm">Lägg till personal för att komma igång med systemet.</div>
      </div>
    );
  }

  return (
    <div className="p-6 fade-in">
      {/* ...resten av din dashboard-komponent... */}
    </div>
  );
}